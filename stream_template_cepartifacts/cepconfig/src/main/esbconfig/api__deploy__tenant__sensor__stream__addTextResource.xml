<@pp.dropOutputFile />
<@pp.changeOutputFile
name="api__deploy__"+tenant.code+"__"+source.code_+"_"+stream.code+"__addTextResource.xml"/>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
	xmlns:ser="http://services.resource.registry.carbon.wso2.org">
	<soapenv:Header />
	<soapenv:Body>
		<ser:addTextResource>
			<!--Optional: -->
			<ser:parentPath>/_system/governance/xsd/${tenant.code}</ser:parentPath>
			<!--Optional: -->
			<ser:fileName>${source.code}_${stream.code}Types.xsd</ser:fileName>
			<!--Optional: -->
			<ser:mediaType></ser:mediaType>
			<!--Optional: -->
			<ser:description>Xsd Validator for	${tenant.code}__${source.code}_${stream.code}</ser:description>
			<!--Optional: -->
			<ser:content><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

	<xs:element name="jsonObject" type="SensorOrApplication">
	</xs:element>

	<xs:complexType name="SensorOrApplication">
		<xs:choice>
			<xs:sequence>
				<xs:element name="values" type="value" minOccurs="1"
					maxOccurs="unbounded" />
				<xs:choice>
					<xs:sequence>
						<xs:element name="stream" minOccurs="1" maxOccurs="1" />
						<xs:choice>
							<xs:element name="sensor" />
							<xs:element name="application" />
						</xs:choice>
					</xs:sequence>
					<xs:sequence>
						<xs:choice>
							<xs:element name="sensor" />
							<xs:element name="application" />
						</xs:choice>
						<xs:element name="stream" minOccurs="1" maxOccurs="1" />
					</xs:sequence>
				</xs:choice>
			</xs:sequence>
			<xs:sequence>
				<xs:element name="stream" minOccurs="1" maxOccurs="1" />
				<xs:choice>
					<xs:sequence>
						<xs:element name="values" type="value" minOccurs="1"
							maxOccurs="unbounded" />
						<xs:choice>
							<xs:element name="sensor" />
							<xs:element name="application" />
						</xs:choice>
					</xs:sequence>
					<xs:sequence>
						<xs:choice>
							<xs:element name="sensor" />
							<xs:element name="application" />
						</xs:choice>
						<xs:element name="values" type="value" minOccurs="1"
							maxOccurs="unbounded" />
					</xs:sequence>
				</xs:choice>
			</xs:sequence>
			<xs:sequence>
				<xs:choice>
					<xs:element name="sensor" />
					<xs:element name="application" />
				</xs:choice>
				<xs:choice>
					<xs:sequence>
						<xs:element name="values" type="value" minOccurs="1"
							maxOccurs="unbounded" />
						<xs:element name="stream" minOccurs="1" maxOccurs="1" />
					</xs:sequence>
					<xs:sequence>
						<xs:element name="stream" minOccurs="1" maxOccurs="1" />
						<xs:element name="values" type="value" minOccurs="1"
							maxOccurs="unbounded" />
					</xs:sequence>
				</xs:choice>
			</xs:sequence>
		</xs:choice>
	</xs:complexType>

	<xs:complexType name="ComponentType">
		<xs:all>
			<#list components as component><xs:element name="${component.code}" type="xs:${component.type}"/>
		  </#list></xs:all>
	</xs:complexType>

	<xs:complexType name="value">
		<xs:all>
			<xs:element name="time" />
			<xs:element name="components" type="ComponentType"/>				
			<xs:element name="validity" minOccurs="0" />
		</xs:all>
	</xs:complexType>
</xs:schema>]]></ser:content>
		</ser:addTextResource>
	</soapenv:Body>
</soapenv:Envelope>
