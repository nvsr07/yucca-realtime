<@pp.dropOutputFile />
<@pp.changeOutputFile name="output__"+tenant.code+"__"+source.code_+"_"+stream.code+"__EventFormatter.xml" />
<?xml version="1.0" encoding="UTF-8"?>
<eventFormatter name="output__${tenant.code}__${source.code_}__${stream.code}__EventFormatter"
  statistics="disable" trace="disable" xmlns="http://wso2.org/carbon/eventformatter">
  <from streamName="output__${tenant.code}__${source.code_}__${stream.code}" version="1.0.0"/>
<mapping customMapping="enable" type="json">
    <inline>{ 
 "stream": "${stream.code}", 
 <#if source.type = "Application">
 "application": "{{meta_source}}",
		<#elseif source.type = "Device">
 "sensor": "{{meta_source}}",
		</#if>
 "values": [ 
 { 
 "time": "{{time}}", 
 "components": { <#list components as component>  "${component.code}": "{{${component.code}}}" <#if component_has_next>,</#if> </#list>   } 
 }
 ]
} </inline>
  </mapping>
  <to eventAdaptorName="JMSMBExternalOutputEventAdaptor.xml" eventAdaptorType="jms">
    <property name="transport.jms.Destination">output.${tenant.code}.${source.code}_${stream.code}</property>
  </to>
</eventFormatter>

