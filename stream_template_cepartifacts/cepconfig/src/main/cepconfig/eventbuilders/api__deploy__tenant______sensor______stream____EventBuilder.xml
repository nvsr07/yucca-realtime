<@pp.dropOutputFile />
<#if source.type!="Internal">
<#list mbs as mb>
<@pp.changeOutputFile
name="api__deploy__"+mb.num+"__"+tenant.code+"__"+source.code_+"_"+stream.code+"__EventBuilder.xml"
/>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:int="http://internal.admin.builder.event.carbon.wso2.org" xmlns:xsd="http://internal.admin.builder.event.carbon.wso2.org/xsd">
   <soapenv:Header/>
   <soapenv:Body>
      <int:deployJsonEventBuilderConfiguration>
         <!--Optional:-->
         <int:eventBuilderName>${tenant.code}__${source.code_}__${stream.code}__EventBuilder</int:eventBuilderName>
         <!--Optional:-->
         <int:streamNameWithVersion>input__${tenant.code}__${source.code_}__${stream.code}:1.0.0</int:streamNameWithVersion>
         <!--Optional:-->
         <int:eventAdaptorName>JMSMBInternalInputEventAdaptor.xml</int:eventAdaptorName>
         <!--Optional:-->
         <int:eventAdaptorType>jms</int:eventAdaptorType>
         <!--Zero or more repetitions:-->
         <#if source.type = "Application">
         <int:jsonPathExpressions>
            <xsd:name>meta_source</xsd:name>
            <!--Optional:-->
            <xsd:type>string</xsd:type>
            <!--Optional:-->
            <xsd:valueOf>application</xsd:valueOf>
         </int:jsonPathExpressions>
         <#elseif source.type = "Device" || source.type = "Feed Tweet">
         <int:jsonPathExpressions>
            <xsd:name>meta_source</xsd:name>
            <!--Optional:-->
            <xsd:type>string</xsd:type>
            <!--Optional:-->
            <xsd:valueOf>sensor</xsd:valueOf>
         </int:jsonPathExpressions>
		</#if>
         <int:jsonPathExpressions>
            <xsd:name>time</xsd:name>
            <!--Optional:-->
            <xsd:type>string</xsd:type>
            <!--Optional:-->
            <xsd:valueOf>values.time</xsd:valueOf>
         </int:jsonPathExpressions>
         <#list components as component>
         <int:jsonPathExpressions>
            <xsd:name>${component.code}</xsd:name>
            <!--Optional:-->
<#if component.type = "dateTime">			
            <xsd:type>string</xsd:type>
<#elseif component.type = "latitude">
            <xsd:type>double</xsd:type>
<#elseif component.type = "longitude">
            <xsd:type>double</xsd:type>
<#else/>
            <xsd:type>${component.type?lower_case}</xsd:type>
</#if>			
            <!--Optional:-->
            <xsd:valueOf>values.components.${component.code}</xsd:valueOf>
         </int:jsonPathExpressions>
         </#list>
         <!--Zero or more repetitions:-->
         <int:inputPropertyConfiguration>
            <!--Optional:-->
            <xsd:key>transport.jms.Destination</xsd:key>
            <!--Optional:-->
            <xsd:value>VirtualQueueConsumer.${mb.num}.input.${tenant.code}.${source.code}_${stream.code}</xsd:value>
         </int:inputPropertyConfiguration>
         <!--Optional:-->
         <int:mappingEnabled>true</int:mappingEnabled>
      </int:deployJsonEventBuilderConfiguration>
   </soapenv:Body>
</soapenv:Envelope>
 </#list>
</#if>